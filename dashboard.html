<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Lexora</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    
    <style>
        /* Add all the dashboard CSS styles from previous response here */
        /* ... (include the full dashboard CSS) ... */
    </style>
</head>
<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="logo">
            <a href="index.html">
                <i class="fas fa-coins"></i>
                LEXORA
            </a>
        </div>

        <ul class="nav-links">
            <li><a href="dashboard.html" class="active">
                <i class="fas fa-home"></i> Dashboard
            </a></li>
            <li><a href="tasks.html">
                <i class="fas fa-tasks"></i> Available Tasks
            </a></li>
            <li><a href="earnings.html">
                <i class="fas fa-dollar-sign"></i> My Earnings
            </a></li>
            <li><a href="withdraw.html">
                <i class="fas fa-wallet"></i> Withdraw Funds
            </a></li>
            <li><a href="profile.html">
                <i class="fas fa-user"></i> Profile
            </a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Top Bar -->
        <div class="top-bar">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div style="font-weight: 600;" id="userEmail">Loading...</div>
                    <div style="font-size: 0.8rem; color: #666;">Premium Member</div>
                </div>
            </div>
            <button class="logout-btn" id="logoutBtn">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>

        <!-- Rest of dashboard content remains the same -->
        <!-- ... (include the full dashboard HTML) ... -->
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAhuZ-9s6Atgl804ijzOjoDrW3bznODHg0",
            authDomain: "lexorasite.firebaseapp.com",
            projectId: "lexorasite",
            storageBucket: "lexorasite.firebasestorage.app",
            messagingSenderId: "547338465904",
            appId: "1:547338465904:web:28a41ac22e86c593fdbab5",
            measurementId: "G-X3RBR8FKXL"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // Check authentication state
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                document.getElementById('userEmail').textContent = user.email;
                document.getElementById('userAvatar').textContent = user.email.charAt(0).toUpperCase();
                
                // Update user info in dashboard
                console.log('User signed in:', user.email);
            } else {
                // User is signed out, redirect to login
                window.location.href = 'index.html';
            }
        });

        // Logout functionality
        document.getElementById('logoutBtn').addEventListener('click', () => {
            auth.signOut().then(() => {
                window.location.href = 'index.html';
            }).catch((error) => {
                console.error('Logout error:', error);
            });
        });

        // Task completion simulation (same as before)
        document.querySelectorAll('.start-task').forEach(button => {
            button.addEventListener('click', function() {
                const taskCard = this.closest('.task-card');
                const taskTitle = taskCard.querySelector('.task-title').textContent;
                const taskAmount = taskCard.querySelector('.task-amount').textContent;
                
                if (confirm(`Start this task: ${taskTitle} for ${taskAmount}?`)) {
                    this.textContent = 'Processing...';
                    this.disabled = true;
                    
                    setTimeout(() => {
                        alert(`Task completed! ${taskAmount} has been added to your balance.`);
                        this.textContent = 'Completed âœ“';
                        this.style.background = '#27ae60';
                        this.style.color = 'white';
                    }, 2000);
                }
            });
        });
    </script>
</body>
</html>
